setwd('/media/sagesteppe/ExternalHD/UFO_ESD_completion/scripts')
p <- '../data'
f <- list.files(file.path(p, 'raw'), pattern = 'csv$')
library(tidyverse)
################################################################################
# CLEAN UP THE QUANTITATIVE BENCHMARKS OF VEGETATION COVER BY FUNCTIONAL GROUP
veg_bench <- read.csv(file.path(p, 'raw', f[grep('Quantitative', f)])) %>%
separate(COVER_PRCNT, c('LOWER', 'UPPER'), sep = '-') %>%
rename(ECO.SITE = ECOLOGICAL_SITE) %>%
mutate(UPPER = ifelse(is.na(UPPER), 0, UPPER))  %>%
mutate(COVER_TYPE = str_replace(COVER_TYPE, 'BARGROUND', 'BAREGROUND'),
ECO.SITE = str_replace(ECO.SITE,'R042XB036NM', 'R042BB036NM'))
################################################################################
# CLEAN UP THE QUANTITATIVE BENCHMARKS OF VEGETATION COVER BY FUNCTIONAL GROUP
veg_bench <- read.csv(file.path(p, 'raw', f[grep('Quantitative', f)])) %>%
separate(COVER_PRCNT, c('LOWER', 'UPPER'), sep = '-') %>%
rename(ECO.SITE = ECOLOGICAL_SITE) %>%
mutate(UPPER = ifelse(is.na(UPPER), 0, UPPER))  %>%
mutate(COVER_TYPE = str_replace(COVER_TYPE, 'BARGROUND', 'BAREGROUND'),
ECO.SITE = str_replace(ECO.SITE,'R042XB036NM', 'R042BB036NM'))
tracking <- read.csv(file.path(p, 'raw', f[grep('Transcription', f)])) %>%
mutate(across(.cols = everything(), ~ na_if(.x, ""))) %>%
filter(!NOTES %in% c('duplicate')) %>%
mutate(NAME = str_to_title(NAME))
View(veg_bench)
View(tracking)
View(tracking)
tracking %>% filter(UFOPlots >= 1)
tracking %>% filter(UFOPlots >= 1 & PERCENTCOVER == 'DONE')
tracking %>% filter(UFOPlots >= 1 & PERCENTCOVER == 'DONE')
tracking %>% filter(UFOPlots > 0 & PERCENTCOVER == 'DONE')
tracking %>% filter(UFOPlots > 0 & PERCENTCOVER == 'DONE') %>% pull(EcologicalSiteId)
tracking %>% filter(UFOPlots > 0 & PERCENTCOVER == 'DONE') %>% select(EcologicalSiteId)
data <- tracking %>% filter(UFOPlots > 0 & PERCENTCOVER == 'DONE') %>% select(EcologicalSiteId)
View(data)
View(tracking)
View(data)
View(veg_bench)
veg_bench %>% distinct(ECO.SITE)
vb <- veg_bench %>%
distinct(ECO.SITE)
View(data)
View(vb)
td <- tracking %>%
filter(UFOPlots > 0 & PERCENTCOVER == 'DONE') %>%
select(EcologicalSiteId)
td <- tracking %>%
filter(UFOPlots > 0 & PERCENTCOVER == 'DONE') %>%
select(EcologicalSiteId) %>%
filter(! EcologicalSiteId %in% vb$ECO.SITE)
View(td)
View(td)
View(tracking)
vb <- veg_bench %>%
distinct(ECO.SITE)
View(vb)
vb <- veg_bench %>%
distinct(ECO.SITE)
td <- tracking %>%
filter(UFOPlots > 0 & PERCENTCOVER == 'DONE') %>%
select(EcologicalSiteId) %>%
filter(! EcologicalSiteId %in% vb$ECO.SITE)
View(vb)
View(vb)
View(td)
View(td)
write.csv(td, '../data/processed/sites2checkforQB.csv')
tracking %>%
filter(UFOPlots > 0 & PERCENTCOVER == 'DONE')
tracking %>%
filter(UFOPlots == 0 & PERCENTCOVER == 'DONE')
tracking %>%
filter(UFOPlots == 0 & PERCENTCOVER == 'DONE') %>%
select(EcologicalSiteId) %>%
filter(! EcologicalSiteId %in% vb$ECO.SITE)
td_non_UFO <- tracking %>%
filter(UFOPlots == 0 & PERCENTCOVER == 'DONE') %>%
select(EcologicalSiteId) %>%
filter(! EcologicalSiteId %in% vb$ECO.SITE)
write.csv(td_non_UFO, '../data/processed/NonUFOsites2checkforQB.csv')
rm(vb, td, veg_bench, tracking)
rm(f,p)
rm(vb, td, veg_bench, tracking, td_non_UFO)
rm(data)
